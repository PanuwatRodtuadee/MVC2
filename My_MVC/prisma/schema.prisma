// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

// 1. ตารางข่าวลือ
model Rumor {
  id               String   @id
  title            String
  content          String
  created_at       DateTime @default(now())
  credibility_score Int     @default(50)
  status           String   @default("normal")
  reports          Report[]
}

// 2. ตารางผู้ใช้งาน
model User {
  id      Int      @id @default(autoincrement())
  name    String
  role    String   @default("general")
  reports Report[]
}

// 3. ตารางการรายงาน
model Report {
  id          Int      @id @default(autoincrement())
  report_date DateTime @default(now())
  type        String
  
  rumor       Rumor    @relation(fields: [rumorId], references: [id])
  rumorId     String
  
  user        User     @relation(fields: [userId], references: [id])
  userId      Int

  @@unique([rumorId, userId])
}