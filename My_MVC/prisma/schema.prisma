// prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

<<<<<<< HEAD
=======
// 1. ตารางข่าวลือ
model Rumor {
  id               String   @id // ใช้ String ตามเดิม
  title            String
  content          String
  created_at       DateTime @default(now())
  credibility_score Int     @default(50)
  status           String   @default("normal")
  is_approved      Boolean  @default(false) 
  reports          Report[]
}

// 2. ตารางผู้ใช้งาน
>>>>>>> 5f708650907fd91cd7a35412458bc768eaaf21fb
model User {
  id      Int      @id @default(autoincrement())
  name    String
  role    String   @default("general") // general, auditor
  reports Report[]
  password String
}

model Rumor {
  id                String   @id
  title             String
  content           String
  created_at        DateTime @default(now())
  credibility_score Int     @default(50)
  status            String  @default("normal") // normal, panic
  
  reports           Report[]
}

model Report {
  id          Int      @id @default(autoincrement())
  report_date DateTime @default(now())
  type        String   // บิดเบือน, ปลุกปั่น, ข้อมูลเท็จ
  
  rumorId     String
  rumor       Rumor    @relation(fields: [rumorId], references: [id])
  
  userId      Int
  user        User     @relation(fields: [userId], references: [id])

  // กฎ: User 1 คน Report ข่าวเดิมได้แค่ครั้งเดียว
  @@unique([rumorId, userId])
}